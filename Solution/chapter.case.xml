<?xml version="1.0" encoding="UTF-8"?>
<section id="ecshop">
	<title>技术架构</title>
	<para>CMS + ECSHOP(ECSHIT)</para>

	<para>应用程序基于pylons框架.</para>
	<para>用户认证OpenLDAP.</para>
	<para>下载数据需要中转</para>

</section>

<section id="solution.catalyst">
	<title>Perl 解决方案</title>
	<screen>
	<![CDATA[
                             2.does it
       _____    1.    _____     exist?   _____   3. no   _____
      (     ) -----> |     |----------->|     |-------->|     |
      ( www )        | pxy |   3. yes   | cch |         | app | 4. get request
      (_____) <----- |_____|<-----------|_____|         |_____|  from app and
                             6. return   __|__  5. mirror   |    store any
                               cached   |     |   across    |    cached object
                               data     | cch |   entire    |    on the cache
                                        |_____|   cache     |    cluster
                                         __|__    cluster   |
                                        |     |             |
                                        | cch |<------------
                                        |_____|



www: apache
pxy: apache -> rewrite + mod_proxy_cascade
	]]>
	</screen>
	<para>下面是一个通用方案的模板</para>
	<screenshot>
		<screeninfo>perl</screeninfo>
		<graphic format="png" fileref="../images/solution/perl_solution.png" srccredit="neo" />
	</screenshot>
	<orderedlist>
		<listitem>
			<para>Smart DNS 解决南北互通问题</para>
		</listitem>
		<listitem>
			<para>LVS + HA 负载均衡</para>
		</listitem>
		<listitem>
			<para>Squid 静态缓存</para>
		</listitem>
		<listitem>
			<para>Apache + mod_perl / Lighttpd + fastcgi 任选</para>
		</listitem>
		<listitem>
			<para>Catalyst Framework
				开发框架,动态perl程序采用http协议头输出在squid节点上缓存，动态数据由memecached提供缓存
			</para>
		</listitem>
		<listitem>
			<para>Memcached 缓存工作在框架与数据库之间</para>
		</listitem>
		<listitem>
			<para>MySQL Cluster 集群</para>
		</listitem>
		<listitem>
			<para>
				静态文件生成后通过csync与其他节点实时同步，静态化HTML有lighttpd提供并在squid节点上缓存,当用户访问文件时由负载均衡器分配到指定lighttpd节点上。
			</para>
		</listitem>
		<listitem>
			<para>图片等多媒体资料存储在分布式文件系统中。</para>
		</listitem>
	</orderedlist>
	<para>将上图中的Catalyst拿掉换成Django就是Python解决方案</para>
	<graphic format="png" fileref="../images/solution/python_solution.png" srccredit="neo" />
</section>
<section id="solution.email">
	<title>集群邮件系统</title>
	<para>基于开源的邮件集群系统解决方案:</para>
	<para></para>
	<para></para>
	<para></para>
	<para>先写到这,有时间再说...886...</para>
	<para></para>
	<para></para>
	<para></para>
	<para></para>
	<para>反病毒</para>
	<para>反拉圾邮件</para>
	<para>Webmail</para>
	<para>自动备份</para>
	<para>POP/SMTP收发邮件与SMTP认证</para>
	<para>邮件列表</para>
	<para>
		. . . .
		.
	</para>
	<para>

	</para>
	
	<screenshot>
		<graphic fileref="../images/solution/postfix_cluster.png" />
	</screenshot>
</section>
